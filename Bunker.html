<!DOCTYPE HTML>
<html>

<head>
    <title>Bunker Offline</title>
    <style type="text/css">
        body {
            width: 400px;
        }

        button {
            margin-top: 5px;
            margin-right: 250px;
            font-weight: bold;
        }

        img {
            box-shadow: 5px 2px 2px 1px gray;
            border-style: inset;
            border-color: black;
            border-width: 1px;
            border-radius: 15px;
            width: 125px;
            height: 185px;
        }

        p {
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>

<body width=400>
    <meta http-equiv="Content-Type"
        content="text/html; charset=utf-8; initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width"
        name="viewport">
    <p>Персонаж:</p>
    <button onclick="GenerateNewSet()">Новый</button>
    <hr>
    <img src='face.jpg' id="cardProfession" onclick="DrawCard('Profession')" onerror="DrawCard('Profession')"></img>
    <img src='face.jpg' id="cardBiology" onclick="DrawCard('Biology')" onerror="DrawCard('Biology')"></img>
    <img src='face.jpg' id="cardHealth" onclick="DrawCard('Health')" onerror="DrawCard('Health')"></img>
    <img src='face.jpg' id="cardHobby" onclick="DrawCard('Hobby')" onerror="DrawCard('Hobby')"></img>
    <img src='face.jpg' id="cardFacts" onclick="DrawCard('Facts')" onerror="DrawCard('Facts')"></img>
    <img src='face.jpg' id="cardBagage" onclick="DrawCard('Bagage')" onerror="DrawCard('Bagage')"></img>
    <img src='face.jpg' id="cardConditions" onclick="DrawCard('Conditions')" onerror="DrawCard('Conditions')"></img>
    <hr>
    <p>Бункер:</p>
    <hr>
    <img src='face.jpg' onclick="DrawCard('Bunker')" id="cardBunker" onerror="DrawCard('Bunker')"></img>
    <img src='face.jpg' onclick="DrawCard('Cataclysm')" id="cardCataclysm" onerror="DrawCard('Cataclysm')"></img>
    <img src='face.jpg' onclick="DrawCard('Threat')" id="cardThreat" onerror="DrawCard('Threat')"></img>
    <hr>

    <script type="text/javascript">
        var Selected = {};
        Selected.Profession = [];
        Selected.Biology = [];
        Selected.Health = [];
        Selected.Hobby = [];
        Selected.Facts = [];
        Selected.Bagage = [];
        Selected.Conditions = [];
        Selected.Bunker = [];
        Selected.Cataclysm = [];
        Selected.Threat = [];

        function DrawCard(t) {
            let r = Math.floor(Math.random() * 50);
            if (r > 9) {
                r = '0' + r;
            }
            else {
                r = "00" + r;
            }
            SelectedChecker(t, r);
        }
        function SelectedChecker(t, r) {
            let s = Selected[t];
            if (s.length == 0) {
                ErrorChecker(t, r);
            }
            else {
                for (let n = 0; n < Selected[t].length; n++) {
                    if (s[n] == r) {
                        console.log(Selected[t][n] + "Уже была");
                        DrawCard(t);
                        break;
                    }
                    else {
                        console.log(Selected[t][n] + "Новая");
                        ErrorChecker(t, r);
                        break;
                    }
                }
            }
        }
        function ErrorChecker(t, r) {
            document.getElementById('card' + t).src = t + '/' + r + '.jpg';
            AddToSelected(t, r);
            if (document.getElementById('card' + t).onerror == null) {
                DrawCard(t);
            }
            else {
                CheckExceptions(t);
            }
        }
        function AddToSelected(t, r) {
            Selected[t].push(r);
        }
        function CheckExceptions(t) {
            if (t != 'Bunker' && t != 'Cataclysm' && t != 'Threat') {
                document.getElementById('card' + t).onclick = '';
            }
        }

        function GenerateNewSet() {
            DrawCard('Profession');
            DrawCard('Biology');
            DrawCard('Health');
            DrawCard('Hobby');
            DrawCard('Facts');
            DrawCard('Bagage');
            DrawCard('Conditions');
        }
    </script>

</body>

</html>